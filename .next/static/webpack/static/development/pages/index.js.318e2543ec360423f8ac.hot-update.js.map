{"version":3,"file":"static/webpack/static/development/pages/index.js.318e2543ec360423f8ac.hot-update.js","sources":["webpack:///./node_modules/next/dist/build/polyfills/fetch/index.js","webpack:///./pages/index.tsx"],"sourcesContent":["\"use strict\";/* globals self */var fetch=self.fetch.bind(self);module.exports=fetch;module.exports.default=module.exports;","import { NextPage, NextPageContext, NextApiRequest, NextApiResponse } from 'next'\nimport fetch from 'isomorphic-unfetch'\n\nconst InfoAPI: NextPage = () => null\ninterface PageContext extends NextPageContext {\n  req: NextApiRequest\n  res: NextApiResponse\n}\n\nInfoAPI.getInitialProps = async ({ req, res }: PageContext) => {\n  res.setHeader('Content-Type', 'application/json')\n  try {\n    const ip = req.headers['x-forwarded-for'] || req.connection.remoteAddress\n    if (!ip) throw new Error('API error')\n    const response = await fetch(`https://freegeoip.app/json/${ip}`, {\n      method: 'get',\n      headers: {\n        accept: 'application/json',\n        // 'x-auth-token': apiKey,\n      },\n    })\n    if (!response.ok) throw new Error('API error')\n    const data = await response.json()\n    res.write(JSON.stringify(data))\n    res.end()\n  } catch (error) {\n    res.write(JSON.stringify({ message: error.message }))\n    res.end()\n  }\n}\n\nexport default InfoAPI\n"],"mappings":";;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;ACCA;AACA;AACA;AAAA;AAAA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAGA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAFA;AAFA;AACA;AANA;AAKA;AACA;AANA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAaA;AACA;AACA;AAfA;AAAA;AACA;AADA;AAAA;AAAA;AAiBA;AAAA;AAAA;AACA;AACA;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAqBA;;;;A","sourceRoot":""}