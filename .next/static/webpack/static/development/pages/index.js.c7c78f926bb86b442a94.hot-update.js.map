{"version":3,"file":"static/webpack/static/development/pages/index.js.c7c78f926bb86b442a94.hot-update.js","sources":["webpack:///./pages/index.tsx"],"sourcesContent":["import { NextPage, NextPageContext, NextApiRequest, NextApiResponse } from 'next'\nimport fetch from 'isomorphic-unfetch'\n\nconst App: NextPage = () => null // ignore this because we overide the response within the server at .getInitialProps\n\ninterface PageContext extends NextPageContext {\n  req: NextApiRequest\n  res: NextApiResponse\n}\n\nApp.getInitialProps = async ({ req, res }: PageContext) => {\n  res.setHeader('Content-Type', 'application/json')\n  try {\n    const ip = req.headers['x-forwarded-for'] || req.connection.remoteAddress\n    if (!ip) throw new Error('API error')\n    const response = await fetch(`https://freegeoip.app/json/${ip}`, {\n      method: 'get',\n      headers: {\n        accept: 'application/json',\n      },\n    })\n    if (!response.ok) throw new Error('API error')\n    const data = await response.json()\n    res.write(JSON.stringify(data))\n    res.end()\n  } catch (error) {\n    res.write(JSON.stringify({ message: error.message }))\n    res.end()\n  }\n}\n\nexport default App\n"],"mappings":";;;;;;;;;;;;;;;;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAGA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AAMA;AACA;AACA;AADA;AAFA;AACA;AANA;AAKA;AACA;AANA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAYA;AACA;AACA;AAdA;AAAA;AACA;AADA;AAAA;AAAA;AAgBA;AAAA;AAAA;AACA;AACA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAoBA;;;;A","sourceRoot":""}